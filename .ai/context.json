{
  "$schema": "./schemas/context.schema.json",
  "version": "1.0.0",
  "project": {
    "name": "beimeng-workspace",
    "description": "AI-Friendly Python Monorepo - 多用途工作空间",
    "structure": "monorepo",
    "language": "python",
    "package_manager": "uv"
  },
  "components": {
    "apps": [
      {
        "$schema": "../../../.ai/schemas/component.schema.json",
        "name": "temu-auto-publish",
        "type": "app",
        "version": "1.0.0",
        "description": "妙手ERP商品发布自动化系统 - 基于Playwright的浏览器自动化方案",
        "purpose": "自动化妙手ERP商品发布流程，实现从首次编辑到批量发布的完整工作流。支持AI标题生成、类目核对、图片管理等SOTA功能。",
        "entry_point": "apps/temu-auto-publish/run_real_test.py",
        "interface": {
          "cli": {
            "command": "python apps/temu-auto-publish/run_real_test.py",
            "description": "执行5→20认领流程完整测试"
          }
        },
        "dependencies": {
          "python": ">=3.12",
          "packages": [
            "playwright>=1.48.0",
            "loguru>=0.7.0",
            "pydantic>=2.0.0",
            "openai>=1.0.0",
            "python-dotenv>=1.0.0"
          ]
        },
        "tags": [
          "automation",
          "browser",
          "playwright",
          "erp",
          "ai",
          "web-scraping"
        ],
        "status": "phase1-complete",
        "path": "apps/temu-auto-publish"
      },
      {
        "$schema": "../../../.ai/schemas/component.schema.json",
        "name": "hello-cli",
        "type": "app",
        "version": "0.1.0",
        "description": "简单的 CLI 问候工具，展示最佳实践",
        "purpose": "这是一个教学示例，展示如何在 beimeng-workspace 中创建符合规范的 CLI 应用。它演示了 Typer 使用、配置管理、类型提示、文档化和 AI-friendly 设计。",
        "entry_point": "apps/cli/hello/main.py",
        "interface": {
          "cli": {
            "command": "python -m apps.cli.hello",
            "arguments": [
              {
                "name": "command",
                "type": "string",
                "required": true,
                "description": "子命令（如：greet）"
              },
              {
                "name": "name",
                "type": "string",
                "required": true,
                "description": "要问候的名字"
              }
            ],
            "options": {
              "--greeting": {
                "type": "string",
                "default": "Hello",
                "description": "问候语"
              },
              "--format": {
                "type": "string",
                "default": "text",
                "choices": [
                  "text",
                  "json"
                ],
                "description": "输出格式"
              },
              "--config": {
                "type": "string",
                "description": "配置文件路径（YAML）"
              }
            }
          },
          "api": {
            "functions": [
              {
                "name": "greet_user",
                "parameters": {
                  "name": "string",
                  "greeting": "string"
                },
                "returns": "string"
              }
            ]
          },
          "input": {
            "format": "yaml",
            "schema": {
              "type": "object",
              "properties": {
                "greeting": {
                  "type": "string"
                },
                "format": {
                  "type": "string",
                  "enum": [
                    "text",
                    "json"
                  ]
                }
              }
            }
          },
          "output": {
            "format": "json|text",
            "schema": {
              "type": "object",
              "properties": {
                "message": {
                  "type": "string"
                },
                "timestamp": {
                  "type": "string"
                }
              }
            }
          }
        },
        "dependencies": {
          "python": ">=3.12",
          "packages": [
            "typer>=0.12.0",
            "pydantic>=2.0.0",
            "pydantic-settings>=2.0.0",
            "rich>=13.0.0",
            "loguru>=0.7.0",
            "pyyaml>=6.0"
          ],
          "internal": []
        },
        "examples": [
          {
            "description": "基础问候",
            "command": "python -m apps.cli.hello greet World",
            "output": {
              "message": "Hello, World!",
              "timestamp": "2025-10-29T12:00:00Z"
            }
          },
          {
            "description": "JSON 输出",
            "command": "python -m apps.cli.hello greet World --format json",
            "output": {
              "message": "Hello, World!",
              "timestamp": "2025-10-29T12:00:00Z"
            }
          },
          {
            "description": "自定义问候语",
            "command": "python -m apps.cli.hello greet 世界 --greeting 你好",
            "output": {
              "message": "你好, 世界!",
              "timestamp": "2025-10-29T12:00:00Z"
            }
          }
        ],
        "tags": [
          "cli",
          "example",
          "tutorial",
          "typer",
          "best-practices"
        ],
        "ai_hints": {
          "common_use_cases": [
            "学习如何创建 CLI 应用的模板",
            "理解 AI-friendly 接口设计的示例",
            "作为新 CLI 工具的起点"
          ],
          "gotchas": [
            "配置文件是可选的，如果不提供会使用环境变量或默认值",
            "JSON 输出格式适合管道处理和 AI 解析",
            "所有输出都包含时间戳以便追踪"
          ],
          "related_components": [
            "scripts/automation/",
            "packages/common/"
          ]
        },
        "path": "apps/cli/hello"
      }
    ],
    "scripts": [
      {
        "$schema": "../../../../.ai/schemas/component.schema.json",
        "name": "data-transform",
        "type": "script",
        "version": "0.1.0",
        "description": "数据转换脚本，支持 JSON 数据的结构化转换",
        "purpose": "演示如何创建符合规范的数据处理脚本，包括输入验证、数据转换和标准化输出。适合批处理和管道操作。",
        "entry_point": "scripts/data_processing/transform/main.py",
        "interface": {
          "cli": {
            "command": "python scripts/data_processing/transform/main.py",
            "options": {
              "--input": {
                "type": "string",
                "description": "输入文件路径（JSON），不提供则从 stdin 读取"
              },
              "--output": {
                "type": "string",
                "description": "输出文件路径（JSON），不提供则输出到 stdout"
              },
              "--operation": {
                "type": "string",
                "default": "uppercase",
                "choices": [
                  "uppercase",
                  "lowercase",
                  "reverse"
                ],
                "description": "转换操作类型"
              }
            }
          },
          "input": {
            "format": "json",
            "schema": {
              "type": "object",
              "properties": {
                "data": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              "required": [
                "data"
              ]
            }
          },
          "output": {
            "format": "json",
            "schema": {
              "type": "object",
              "properties": {
                "result": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "operation": {
                  "type": "string"
                },
                "count": {
                  "type": "integer"
                }
              }
            }
          }
        },
        "dependencies": {
          "python": ">=3.12",
          "packages": [
            "pydantic>=2.0.0",
            "loguru>=0.7.0",
            "typer>=0.12.0"
          ],
          "internal": []
        },
        "examples": [
          {
            "description": "转换为大写",
            "command": "echo '{\"data\": [\"hello\", \"world\"]}' | python scripts/data_processing/transform/main.py",
            "input": {
              "data": [
                "hello",
                "world"
              ]
            },
            "output": {
              "result": [
                "HELLO",
                "WORLD"
              ],
              "operation": "uppercase",
              "count": 2
            }
          },
          {
            "description": "从文件读取并转换",
            "command": "python scripts/data_processing/transform/main.py --input data.json --output result.json --operation lowercase",
            "input": {
              "data": [
                "HELLO",
                "WORLD"
              ]
            },
            "output": {
              "result": [
                "hello",
                "world"
              ],
              "operation": "lowercase",
              "count": 2
            }
          }
        ],
        "tags": [
          "data-processing",
          "script",
          "example",
          "transformation",
          "pipeline"
        ],
        "ai_hints": {
          "common_use_cases": [
            "批量数据转换和处理",
            "作为数据管道的一部分",
            "学习脚本规范的模板"
          ],
          "gotchas": [
            "输入必须是有效的 JSON 格式",
            "支持 stdin/stdout，适合管道操作",
            "所有输入都会通过 Pydantic 验证"
          ],
          "related_components": [
            "apps/cli/hello/",
            "scripts/automation/"
          ]
        },
        "path": "scripts/data_processing/transform"
      }
    ],
    "packages": [
      {
        "$schema": "../../.ai/schemas/component.schema.json",
        "name": "common",
        "type": "package",
        "version": "0.1.0",
        "description": "通用组件和工具库，提供跨项目共享的功能",
        "purpose": "为项目中的各种应用和脚本提供可复用的通用功能，包括日志、配置、验证和工具函数。减少代码重复，保持一致性。",
        "entry_point": "packages/common/__init__.py",
        "interface": {
          "api": {
            "functions": [
              {
                "name": "setup_logger",
                "module": "logger",
                "description": "配置和返回 loguru logger"
              }
            ],
            "classes": [
              {
                "name": "BaseAppConfig",
                "module": "config",
                "description": "应用配置基类"
              }
            ]
          }
        },
        "dependencies": {
          "python": ">=3.12",
          "packages": [
            "loguru>=0.7.0",
            "pydantic>=2.0.0",
            "pydantic-settings>=2.0.0"
          ],
          "internal": []
        },
        "examples": [
          {
            "description": "使用日志功能",
            "command": "from packages.common.logger import setup_logger; logger = setup_logger('app')"
          },
          {
            "description": "使用配置基类",
            "command": "from packages.common.config import BaseAppConfig"
          }
        ],
        "tags": [
          "library",
          "common",
          "utils",
          "shared"
        ],
        "ai_hints": {
          "common_use_cases": [
            "为新应用设置标准化日志",
            "创建统一的配置管理",
            "使用通用的数据验证模型"
          ],
          "gotchas": [
            "所有应用应该使用这个包来保持一致性",
            "不要在这里放置特定应用的逻辑"
          ],
          "related_components": [
            "apps/cli/hello/",
            "scripts/data_processing/transform/"
          ]
        },
        "path": "packages/common"
      }
    ]
  },
  "conventions": {
    "documentation": {
      "required_files": [
        "README.md",
        ".ai.json",
        "examples/"
      ],
      "docstring_style": "google",
      "api_doc_tool": "pdoc"
    },
    "code_style": {
      "linter": "ruff",
      "formatter": "ruff",
      "type_checker": "mypy",
      "max_line_length": 100
    },
    "cli": {
      "framework": "typer",
      "input_format": [
        "json",
        "yaml"
      ],
      "output_format": [
        "json",
        "yaml",
        "text"
      ]
    }
  },
  "ai_features": {
    "structured_context": {
      "enabled": true,
      "description": "所有组件在 context.json 中自动索引"
    },
    "schema_validation": {
      "enabled": true,
      "description": "每个组件使用 JSON Schema 定义接口"
    },
    "prompt_templates": {
      "enabled": true,
      "location": ".ai/prompts/"
    },
    "tool_discovery": {
      "enabled": true,
      "description": "自动发现和注册工具"
    }
  },
  "discovery": {
    "patterns": {
      "apps": "apps/**/pyproject.toml",
      "scripts": "scripts/**/*.py",
      "tools": "scripts/tools/**/*.py"
    }
  },
  "last_updated": "2025-10-29T02:18:30.948774+00:00"
}