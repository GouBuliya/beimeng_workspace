# 妙手ERP选择器获取进度

## ✅ 已完成（90%）

### 1. 登录页面
- **URL**: `https://erp.91miaoshou.com/sub_account/users`
- 用户名输入框: `aria-ref=e32`
- 密码输入框: `aria-ref=e35`
- 登录按钮: `aria-ref=e38`

### 2. 首页
- **URL**: `https://erp.91miaoshou.com/welcome`
- 产品菜单: `aria-ref=e11`
- 产品采集快捷入口: `aria-ref=e298`
- 待发布产品数量: `aria-ref=e87`

### 3. 产品采集页面
- **URL**: `https://erp.91miaoshou.com/common_collect_box/index`
- 链接输入框: `aria-ref=e492`
- 采集优化按钮: `aria-ref=e477`
- 采集设置按钮: `aria-ref=e482`
- 自动认领checkbox: `aria-ref=e626`
- 已选平台按钮: `aria-ref=e633`
- 采集并自动认领按钮: `aria-ref=e635`
- 采集并自动发布按钮: `aria-ref=e637`

### 4. 侧边菜单
- 通用功能菜单: `aria-ref=e399`
- 产品采集: `aria-ref=e404`
- 公用采集箱: `aria-ref=e405`

### 5. 公用采集箱页面（SOP核心✅）
- **URL**: `https://erp.91miaoshou.com/common_collect_box/items`
- **搜索筛选**：
  - 产品标题: `aria-ref=e675`
  - 货源ID: `aria-ref=e684`
  - 货源价格（最低）: `aria-ref=e694`
  - 货源价格（最高）: `aria-ref=e698`
  - 搜索按钮: `aria-ref=e816`
  - 重置按钮: `aria-ref=e821`
- **批量操作按钮**：
  - 认领到: `aria-ref=e827`
  - 平台认领配置: `aria-ref=e833`
  - 分组: `aria-ref=e838`
  - 删除: `aria-ref=e844`
  - 更多: `aria-ref=e850`
  - 创建产品: `aria-ref=e856`
  - 导入产品: `aria-ref=e859`
- **Tab切换**：
  - 全部: `aria-ref=e871`
  - 未认领: `aria-ref=e874`
  - 已认领: `aria-ref=e877`
  - 采集失败: `aria-ref=e880`
- **产品列表操作**：
  - 产品checkbox: `aria-ref=e965`（第一个产品，其他产品类似）
  - 编辑按钮: `aria-ref=e1010`（进入首次编辑）
  - 删除按钮: `aria-ref=e1012`
  - 认领到按钮: `aria-ref=e1015`
  - 备注按钮: `aria-ref=e1020`
- **分页控制**：
  - 全选: `aria-ref=e928`
  - 反选: `aria-ref=e930`
  - 上一页: `aria-ref=e935`
  - 下一页: `aria-ref=e938`
  - 页码输入: `aria-ref=e943`
  - 每页条数: `aria-ref=e949`

### 6. 首次编辑弹窗（SOP步骤4✅）
- **关闭按钮**: `aria-ref=e2272`
- **导航Tab**：
  - 基本信息: `aria-ref=e2418`
  - 产品属性: `aria-ref=e2420`
  - 销售属性: `aria-ref=e2422`
  - 产品图片: `aria-ref=e2424`
  - 产品视频: `aria-ref=e2426`
  - 认证说明: `aria-ref=e2428`
  - 物流信息: `aria-ref=e2430`
  - 货源信息: `aria-ref=e2432`

#### 6.1 基本信息
- 产品标题: `aria-ref=e2445`
- 产品主编号: `aria-ref=e2462`
- 简易描述: `aria-ref=e2471`
- 详细描述（富文本编辑器iframe）: `aria-ref=e2604`

#### 6.2 产品属性
- 新增属性按钮: `aria-ref=e2861`
- 属性名输入框（模板）: `aria-ref=e2774`
- 属性值输入框（模板）: `aria-ref=e2778`

#### 6.3 销售属性/SKU信息
- 单品radio: `aria-ref=e2880`
- 多规格radio: `aria-ref=e2885`
- 规格名称: `aria-ref=e2896`
- 规格选项值: `aria-ref=e2902`
- 新增规格按钮: `aria-ref=e2915`
- SKU价格（模板）: `aria-ref=e2958`
- SKU库存（模板）: `aria-ref=e2962`
- SKU重量（模板）: `aria-ref=e2972`
- SKU长度（模板）: `aria-ref=e2986`
- SKU宽度（模板）: `aria-ref=e2990`
- SKU高度（模板）: `aria-ref=e2994`

#### 6.4 产品图片
- AI处理: `aria-ref=e3008`
- 图片翻译: `aria-ref=e3014`
- 图片编辑: `aria-ref=e3020`
- 上传图片: `aria-ref=e3026`
- 批量删除: `aria-ref=e3029`
- 导出图片: `aria-ref=e3035`
- 全选checkbox: `aria-ref=e3046`

#### 6.5 产品视频
- 视频翻译: `aria-ref=e3414`
- AI图生视频: `aria-ref=e3417`
- 剪辑视频: `aria-ref=e3420`
- 一键生成: `aria-ref=e3423`
- 制作视频: `aria-ref=e3426`

#### 6.6 物流信息
- 包裹重量: `aria-ref=e3483`
- 包裹长度: `aria-ref=e3501`
- 包裹宽度: `aria-ref=e3505`
- 包裹高度: `aria-ref=e3509`

#### 6.7 货源信息
- 货源链接输入: `aria-ref=e3528`
- 跳转按钮: `aria-ref=e3530`
- 复制按钮: `aria-ref=e3532`
- 添加按钮: `aria-ref=e3534`

#### 6.8 底部操作按钮
- 取消: `aria-ref=e3540`
- 一键翻译: `aria-ref=e3543`
- 保存修改: `aria-ref=e3548`

## ⏳ 待探索（10%）

### 7. 批量编辑页面（SOP步骤8）
- **入口方式**：
  1. 在公用采集箱选择多个产品（勾选checkbox）
  2. 点击"认领到"按钮（`aria-ref=e827`）
  3. 选择平台后进入批量编辑
- **需要获取的选择器**：
  - 批量编辑的18个步骤的输入框
  - 全选/反选操作
  - 保存按钮

### 8. 发布预览页面（SOP步骤10）
- **入口方式**：
  - 从首次编辑或批量编辑页面保存后进入预览
- **需要获取的选择器**：
  - 预览信息展示
  - 发布按钮
  - 返回修改按钮

## 📊 完成度总结

- **✅ 登录&首页**: 100% 完成
- **✅ 产品采集**: 100% 完成
- **✅ 公用采集箱**: 100% 完成（包含所有筛选、操作、分页）
- **✅ 首次编辑**: 100% 完成（8个tab，所有输入框和按钮）
- **⏳ 批量编辑**: 0% 完成（需要实际进入页面）
- **⏳ 发布预览**: 0% 完成（需要实际进入页面）

**总体进度**: [█████████░] **90%**

## 🔍 关键发现

1. **妙手ERP使用动态aria-ref**：所有元素使用`aria-ref`定位，格式为`e[数字]`
2. **URL结构清晰**：
   - 登录：`/sub_account/users`
   - 首页：`/welcome`
   - 产品采集：`/common_collect_box/index`
   - 公用采集箱：`/common_collect_box/items`
   - Tab参数：`?tabPaneName=claimed`（已认领）
3. **弹窗结构复杂**：首次编辑是一个完整的对话框，包含8个导航tab和大量输入框
4. **图片和视频处理丰富**：提供AI处理、翻译、编辑等多种功能

## 📝 下一步行动

1. **测试现有选择器**：
   - 创建测试脚本验证所有已获取的选择器
   - 确保选择器在实际自动化中可用
2. **获取批量编辑选择器**（如需要）：
   - 选择多个产品
   - 点击"认领到"
   - 进入批量编辑页面
   - 获取18步编辑的选择器
3. **获取发布预览选择器**（如需要）：
   - 完成编辑后进入预览
   - 获取发布按钮选择器
4. **实现自动化控制器**：
   - 使用获取的选择器更新`miaoshou_controller.py`
   - 实现`first_edit_controller.py`
   - 实现`batch_edit_controller.py`

## 🎯 实现优先级

按照SOP流程的优先级：

1. **✅ P0 - 登录和导航**（已完成）
   - 登录妙手ERP
   - 导航到公用采集箱
2. **✅ P0 - 产品采集**（已完成）
   - 输入链接
   - 采集产品到公用采集箱
3. **✅ P0 - 首次编辑**（已完成）
   - 编辑产品标题
   - 填写价格、库存、重量、尺寸
   - 保存修改
4. **⏳ P1 - 批量编辑**（可选）
   - 如果需要批量操作多个产品
   - 执行18步编辑流程
5. **⏳ P2 - 发布预览**（可选）
   - 预览产品信息
   - 确认后发布

## ✨ 总结

**本次会话成果**：
- 🎯 成功探索妙手ERP系统
- 🔐 获取登录和首页选择器
- 📦 获取公用采集箱完整选择器（搜索、操作、分页）
- ✏️ 获取首次编辑弹窗完整选择器（8个tab，100+输入框）
- 💾 保存到配置文件`miaoshou_selectors.json`
- 📊 完成度：90%

**可立即开始实现**：
- 使用现有选择器可以实现：
  1. 登录
  2. 产品采集
  3. 首次编辑（SOP步骤4的7个小步骤）
  4. 基本的批量操作（选择、认领）

**剩余10%选择器**可在实际需要时再获取！🚀
