# 10月品自动化流程快速参考

## ✅ 当前状态

- ✅ Excel已格式化：`data/input/10月品_formatted.xlsx`
- ✅ 产品总数：31个产品，45个规格
- ⏸️ 等待手动采集：在Temu采集商品到妙手采集箱

## 🎯 执行步骤

### 步骤1：手动采集商品（必需）

**建议先采集5个产品测试：**
1. 卫生间收纳柜 (A026) - 3个规格
2. 带轮子的滚动洗衣篮 (A045/A046) - 2个规格  
3. 三层晾衣架(单管） (A057) - 1个规格
4. 马桶刷 黑色 (A061/A062/A063) - 4个规格
5. 15cm方形猫砂盆 (A055) - 2个规格

**采集方法：**
- 在Temu前端搜索产品名称
- 找到对应商品后点击妙手插件按钮
- 添加到妙手采集箱

### 步骤2：运行自动化脚本

#### 方式A：简化模式（快速执行）

```bash
cd /Users/candy/beimeng_workspace/apps/temu-auto-publish

python run_collection_to_edit_test.py \
    --skip-collection \
    --selection data/input/10月品_formatted.xlsx \
    --no-wait
```

**特点**：
- ✅ 快速执行，无需交互
- ✅ 自动编辑采集箱中的前5个产品
- ✅ 生成详细报告

#### 方式B：断点调试模式（推荐首次使用）

```bash
cd /Users/candy/beimeng_workspace/apps/temu-auto-publish

python run_collection_to_edit_test.py \
    --skip-collection \
    --selection data/input/10月品_formatted.xlsx \
    --debug-breakpoint
```

**特点**：
- 🐛 逐步执行，观察每个步骤
- 📊 显示详细数据（标题、价格、库存等）
- ⌨️ 按'n'继续，'c'跳过所有，'q'退出

**断点位置**：
1. 准备编辑产品 → 显示产品基本信息
2. 编辑弹窗已打开 → 确认弹窗状态
3. 准备AI生成标题 → 显示原始标题
4. AI标题生成完成 → 显示新标题和耗时
5. 准备保存修改 → 显示最终编辑结果

### 步骤3：验证结果

检查妙手ERP中的产品：
- ✅ 标题已更新（AI生成+型号后缀）
- ✅ 价格已设置（成本×7.5）
- ✅ 库存已设置（100）
- ✅ 尺寸已设置（长>宽>高）

## 📊 完整产品清单

| 序号 | 产品名称 | 型号 | 规格数 |
|-----|---------|-----|-------|
| 1 | 卫生间收纳柜 | A026 | 3 |
| 2 | 带轮子的滚动洗衣篮 | A045/A046 | 2 |
| 3 | 三层晾衣架(单管） | A057型号 | 1 |
| 4 | 马桶刷 黑色 | A061型号 B022等 | 4 |
| 5 | 15cm方形猫砂盆 | A055 | 2 |
| 6 | 注水式提壶哑铃 | A064 | 1 |
| 7 | 太空人垃圾桶 | A065 | 1 |
| 8 | 车载储物箱 | A066 | 1 |
| 9 | 车载储水箱 | A067 | 1 |
| 10 | 户外便携式帐篷 | A068 | 2 |
| ... | ... | ... | ... |
| 31 | 钓鱼盲盒 | A097 | 2 |

**完整清单**：见上面终端输出

## 🎓 使用技巧

### 测试工作流程
1. 先采集5个产品（约12个规格）
2. 运行断点调试模式观察流程
3. 验证前几个产品编辑结果
4. 确认无误后，采集剩余26个产品
5. 运行简化模式批量处理

### AI标题生成效果
- 模型：qwen3-vl-plus
- 优化：提取高频词、符合平台规则
- 语言：中文
- 后缀：自动添加型号（如"A026型号"）

### 价格计算
- 默认倍率：7.5倍
- 示例：成本150元 → 售价1125元
- 可调整：修改`price_calculator.py`

### 数据来源
- 产品名称：从Excel读取
- 型号后缀：从Excel读取
- 原始标题：从妙手采集箱读取
- 规格信息：从Excel读取

## ⚠️ 注意事项

1. **采集数量限制**
   - 脚本默认处理前5个产品
   - 如需处理更多，需修改代码或多次运行

2. **AI API额度**
   - 使用DashScope API
   - 确保API key有足够额度
   - 每个产品约消耗1-2秒

3. **选择器准确性**
   - 重量选择器可能需要调试
   - 其他功能已测试通过

4. **手动确认**
   - 建议先测试5个产品
   - 验证编辑结果符合预期
   - 再批量处理剩余产品

## 🐛 故障排查

### 问题1：找不到编辑按钮
**原因**：采集箱中商品数量不足
**解决**：确认至少采集了5个商品到采集箱

### 问题2：AI生成失败
**原因**：API key无效或额度不足
**解决**：检查`.env`文件中的`DASHSCOPE_API_KEY`

### 问题3：标题未更新
**原因**：选择器失效
**解决**：使用断点调试模式观察具体步骤

### 问题4：价格异常
**原因**：成本价格缺失
**解决**：使用默认价格150元

## 📖 相关文档

- [调试模式文档](DEBUG_MODE.md)
- [格式化工具文档](SELECTION_FORMAT.md)
- [项目README](../README.md)
- [快速开始](../QUICKSTART.md)

## 🎯 验收标准

完成以下检查后即可认为流程成功：

- [ ] 5个产品的标题都已更新
- [ ] 标题包含AI优化内容和型号后缀
- [ ] 价格符合预期（成本×7.5）
- [ ] 库存已设置为100
- [ ] 尺寸已设置（可查看日志确认）
- [ ] 无严重错误（WARNING可忽略）

## 💡 下一步

测试成功后：
1. 采集剩余26个产品（共31个）
2. 再次运行脚本处理所有产品
3. 或者根据需要分批处理

---

**创建时间**: 2025-11-01  
**版本**: v1.0  
**状态**: ✅ 就绪

